<apex:page standardStylesheets="false" showHeader="true" sidebar="false" controller="WhiteboardController" id="thePage">
    <apex:stylesheet value="{!URLFOR($Resource.bootstrap, '/bootstrap/css/bootstrap.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.bootstrap, '/bootstrap/css/bootstrap.min.css')}"/>
    <script src="{!URLFOR($Resource.bootstrap_modal)}"/>
    <script src="{!URLFOR($Resource.jQueryLibrary)}"/>
    <script type="text/javascript">        
        var itemId;
        var j$ = jQuery.noConflict();
        function setWhiteboardId()
        {
            document.getElementById('thePage:activityForm:whiteboardId').value = itemId;
            j$('#modal-from-dom-Activity-Company').modal('hide');
        }
    </script>
    <script type="text/javascript">        
        var itemIdPersonal;
        var j$ = jQuery.noConflict();
        function setWhiteboardIdPersonal()
        {
            document.getElementById('thePage:activityFormP:whiteboardIdPersonal').value = itemIdPersonal;
            j$('#modal-from-dom-Activity-Personal').modal('hide');
        }
    </script>
    
    <div class="container">
        <div id="pageBlock" class="row">
            <div class="span12" id="whiteboardButtons">
                <apex:form >
                    <apex:commandButton styleClass="btn" id="switchToCompany" action="{!getCompanyItems}" value="Company Whiteboard" reRender=""/>
                    <apex:commandButton styleClass="btn" id="switchToPersonal" action="{!getPersonalItems}" value="Personal Whiteboard"/>
                </apex:form>
            </div>
        </div>

        <div class="row">
            <div class="span12">
                <apex:sectionHeader title="{!currentWhiteboard}" id="title"/>
                <a href="#wbItem" id="newItem" data-controls-modal="modal-from-dom-Item-Company" data-backdrop="true" class="btn btn-primary">New Item</a>
            </div>
        </div>
        
        <div class="row">
            <apex:repeat value="{!currentItems}" var="item" id="itemList">  <!-- Starts the repetition of the ITEMS -->
                <ul class="nav">
                    <li><a href="/{!item.Id}" id="itemName" >{!item.Name}</a></li>
                    <li><a href="#wbAct" id="newActLink" data-controls-modal="modal-from-dom-Activity-Company" data-backdrop="true" onclick="itemId='{!item.Id}'" >New Activity</a></li>
                    <li>    
                        <apex:form >
                        <!-- confirmation popup to trash item -->
                        <apex:commandButton reRender="companyPageBlock" action="{!trashItem}" value="Trash" id="delete" style="text-decoration: underline" onclick="if (!confirm('Are you sure you want to send this item to the trash?')) {return;};">                                                                     
                            <apex:param name="ItemId" value="{!item.Id}"/>
                        </apex:commandButton>
                        </apex:form>
                    </li>
                </ul>
            </apex:repeat>  <!-- Ends the repetition of the ITEMS -->
        </div>
        
        <!-- Display trashed items -->
        
        <div class="row">
            <div class="span12">
                <apex:sectionHeader title="{!currentWhiteboardTrash}" id="trashTitle"/>
            </div>                   
        </div>
        
        <div class="row">
            <apex:repeat value="{!trashItems}" var="item" id="trashItemList">  <!-- Starts the repetition of the ITEMS -->
                <ul class="nav">
                    <li><a href="/{!item.Id}" id="itemName" >{!item.Name}</a></li>
                    <li><a href="#wbAct" id="newActLink" data-controls-modal="modal-from-dom-Activity-Company" data-backdrop="true" onclick="itemId='{!item.Id}'" >New Activity</a></li>
                    <li>    
                        <apex:form >
                        <!-- confirmation popup to untrash and delete item -->
                        <apex:commandButton reRender="companyPageBlock" action="{!unTrashItem}" value="UnTrash This Item" id="untrash" style="text-decoration: underline" onclick="if (!confirm('Are you sure you want to pull this out of the trash?')) {return;};">                                                                                                                                          
                            <apex:param name="ItemId" value="{!item.Id}"/>
                        </apex:commandButton>
                        <apex:commandButton reRender="companyPageBlock" action="{!deleteItem}" value="Delete Forever" id="delete" style="text-decoration: underline" onclick="if (!confirm('Are you sure you want to delete this item forever?')) {return;};">                       
                            <apex:param name="ItemId" value="{!item.Id}"/>
                        </apex:commandButton>
                        </apex:form>
                    </li>
                </ul>
            </apex:repeat>  <!-- Ends the repetition of the ITEMS -->
        </div>
        
        <!-- END OF Display trashed items -->
        
        
        <!-- ACTIVITY ADD modal box -->
        <div id="modal-from-dom-Activity-Company" class="modal hide fade" style="display: none;">
            <apex:form id="activityForm">
                <apex:inputHidden id="whiteboardId" value="{!whiteboardId}"/>
                <div class="modal-header">
                    <h3>New Activity</h3>
                </div>
                <div class="modal-body">
                    <apex:pageBlock >    
                        <apex:pageBlockButtons location="bottom">
                            <apex:commandButton reRender="companyPageBlock, activityForm" styleClass="btn" value="Save" onclick="setWhiteboardId(); j$('#modal-from-dom-Activity-Company').modal('hide');" action="{!saveAct}"/>
                            <apex:commandButton reRender="activityForm" styleClass="btn" value="Cancel" onclick="j$('#modal-from-dom-Activity-Company').modal('hide');return false;"/>
                        </apex:pageBlockButtons>
                        <apex:pageBlockSection showHeader="false" id="wb_item_act_input">
                            <apex:inputField label="Name" value="{!activity.Name}" id="n"/><br/>
                            <apex:inputField label="Description" value="{!activity.Description__c}" id="a"/><br/>
                            <apex:inputField label="Due Date" value="{!activity.Due_Date__c}" id="d"/><br/>
                        </apex:pageBlockSection>
                    </apex:pageBlock>
                </div>
            </apex:form>                    
        </div>
        
        <!-- ITEM ADD modal box -->
        <div id="modal-from-dom-Item-Company" class="modal hide fade" style="display: none;">
            <apex:form id="itemFormC">
                <div class="modal-header">
                    <h3>New Item</h3>
                </div>
                <apex:pageBlock >
                    <apex:pageBlockButtons location="bottom" styleClass="save_button">
                        <apex:commandButton reRender="companyPageBlock, itemFormC" styleClass="btn" value="Save" onclick="j$('#modal-from-dom-Item-Company').modal('hide');" action="{!save}"/>
                        <apex:commandButton styleClass="btn" value="Cancel" onclick="j$('#modal-from-dom-Item-Company').modal('hide');return false;"/>
                    </apex:pageBlockButtons>
                    <apex:pageBlockSection showHeader="false" id="wb_item_input">
                        <apex:inputField label="Name" value="{!Item.Name}"/>
                    </apex:pageBlockSection>
                </apex:pageBlock>                
            </apex:form>            
        </div>
    </div> <!-- ENDS THE COMPANY WHITEBOARD -->
               

</apex:page>